<?xml version="1.0" encoding="utf-8" ?>
<data>
    <learn-article-view>
        <section id="61" handle="articles">Articles</section>
        <entry id="54033">
            <audiences>
                <item handle="beginners">Beginners</item>
                <item handle="users">Users</item>
                <item handle="developers">Developers</item>
            </audiences>
            <author>
                <item id="38135">jonasd</item>
            </author>
            <body mode="formatted"><p>You’re already a Symphony superhero — you’ve downloaded and installed Symphony, and used it to build an amazing website. Now you want the capability to easily update Symphony and its extensions as they are released, and perhaps also version control your own installation to better manage your changes and customizations. But getting Git? Good grief! </p>
<p>Never fear, a guide is here!</p>
<h4>Cloning the core repository</h4>
<p>Most commonly you will begin by cloning the Symphony core, and updating its submodules. This provides a simple way to update Symphony when new versions are released. You should perform these commands wherever your development Symphony installation lives.</p>
<pre><code>git clone git://github.com/symphonycms/symphony-2.git directory
cd directory
git submodule update --init
</code></pre>
<p>If you already have an existing (non-git) Symphony installation, you will need to perform these commands in a new location, then move your existing workspace and any other customizations there.</p>
<p>If you don’t need to version control anything else, you can quit while you’re ahead and enjoy the easy updates your cloned repository provides. Just issue the command:</p>
<pre><code>git pull
</code></pre>
<p>and your core is up to date.</p>
<h4>Switching to a specific release</h4>
<p>Occasionally Symphony betas or release candidates are available for testing, and you want to try one out. Here’s how. (Note that any required database changes between versions will not be reflected in this process, unless you opt to run <code>update.php</code>. In other words, don’t do this until you know what you’re doing.)</p>
<p>Fetch all tags and view them:</p>
<pre><code>git fetch --tags
git tag
</code></pre>
<p>choose the one you want (e.g., 2.1.1) and perform a <code>checkout</code>. Subsequently, name the branch.</p>
<pre><code>git checkout 2.1.1
git checkout -b 211
</code></pre>
<p>You can see all of your local branches with:</p>
<pre><code>git branch -v
</code></pre>
<p>To switch back to the master (stable) release:</p>
<pre><code>git checkout master
</code></pre>
<h4>Switching to the integration branch and using cherry-pick</h4>
<p>If you’re living on the bleeding edge, you will most likely need to switch to the <code>integration</code> branch, which is where active development on Symphony happens. This also comes in handy if you need specific bugfixes that haven’t been bundled into an official (tagged) release yet.</p>
<pre><code>git checkout -b integration
git pull origin integration
</code></pre>
<p>On the somewhat rare occasion that you want to grab code from a particular <code>commit</code>, you can do so with <code>git cherry-pick</code>. Just switch to the branch with the relevant commit, and specify the commit you want. </p>
<pre><code>git checkout master
git cherry-pick 3346e9459d1964438934194f6f28b290b8e71bcd
</code></pre>
<p>You can also undo this if something blows up:</p>
<pre><code>git revert 3346e9459d1964438934194f6f28b290b8e71bcd
</code></pre>
<h4>Adding extensions to your installation</h4>
<p>It’s good practice to add any custom Symphony extensions as git submodules. To add an extension, find its URL on Github, then issue a command like this in your installation root directory:</p>
<pre><code>git submodule add git://github.com/user/extension-name.git extensions/extension-name
</code></pre>
<p>After adding an extension as a submodule, you will probably need to update it to a newer version from time to time. Perform these commands in your Symphony root folder:</p>
<pre><code>cd extensions/extension-name
git pull origin master
cd ../../
git commit -m "I updated extension-name."
</code></pre>
<h4>Updating Symphony</h4>
<p>You’ve cloned the Symphony repository, set up your workspace, and added some extensions as submodules. Now you want to upgrade to a new Symphony release. <code>git pull</code>, right? Wrong:</p>
<pre><code>Entry '.gitmodules' would be overwritten by merge. Cannot merge.
</code></pre>
<p>Doh! We have a conflict: the master Symphony repository and your local version have different sets of submodules. Git needs your help! First, <code>stash</code> your changes. Then do your <code>pull</code> and apply the changes to the updated repository.</p>
<pre><code>git stash
git pull origin master
git stash apply
</code></pre>
<p>Be aware that you may need to resolve some conflicts during the <code>stash apply</code> step by using <code>git add</code> or <code>git rm</code>.</p>
<h4>A repository of your own</h4>
<p>Now you’re feeling happy and you want to version control your own site customizations. How you do this depends on your deployment environment — do you have git locally? Do you have staging and production servers? Do you want to post your stuff to Github? We’ll cover the bases — choose your flavor of control and scale up as you need.</p>
<h5>Lightweight: using a local <code>workspace</code> repository only</h5>
<p>If you have a simple site with very few extensions, it’s easy to keep only your workspace under local version control. In this example, git must be available on your system, and you will simply maintain a private, local git repository for the workspace.</p>
<pre><code>cd workspace
git init
git add .
git commit -m "initial commit"
</code></pre>
<h5>Welterweight: using a complete site repository</h5>
<p>Usually most customizations occur in the workspace area, but in practice, there may be other items you want to track, such as settings in the <code>manifest/config.php</code> file or your entire site installation. In these cases, you can turn your whole site into a git repository. </p>
<p>One great way to do this is to create a new branch for your site. After installing Symphony, create a second branch. We’ll call it “mysite.”</p>
<pre><code>git branch mysite
git checkout mysite
</code></pre>
<p>henceforth you’ll use the “mysite” branch to do all your work. When you need to update Symphony, you’ll switch back to the master branch, update, and merge.</p>
<pre><code>git checkout master
git pull origin master
git checkout mysite
git merge master
</code></pre>
<p>Again, you may have to clean up conflicts during the merge step, by using <code>git add</code> or <code>git rm</code>.</p>
<h5>Middleweight: deploying your site to public or private repositories</h5>
<p>Suppose you want to host a copy of your site’s repository on Github, or use a local development repository and occasionally push it to another server. You’ll maintain a link to the official repository for core updates, but change the origin to your own repository.</p>
<pre><code>git remote add symphony git://github.com/symphonycms/symphony-2.git
git remote rm origin
git remote add origin git@github.com:username/site.git
git push origin master
</code></pre>
<p>You could also skip Github and do this on your own server. First set up your repository:</p>
<pre><code>ssh user@host.com
mkdir /path/to/mysite.git
cd /path/to/mysite.git
git --bare init
</code></pre>
<p>Then update your local cloned Symphony:</p>
<pre><code>git remote add symphony git://github.com/symphonycms/symphony-2.git
git remote rm origin
git remote add origin ssh://user@host.com:/path/to/mysite.git
git push origin master
</code></pre>
<p>When you want to update the core, pull from the Symphony remote:</p>
<pre><code>git pull symphony master
</code></pre>
<h5>Heavyweight: the workspace as a submodule</h5>
<p>The benefit of maintaining the workspace as a submodule is the ability to maintain a clean separation between site customizations and the Symphony core. The downside is that you need to maintain two repositories. Let’s say that your core repository is called <code>site</code> and your workspace repository is called <code>site-workspace</code>. Here’s the process of setting up the core repository with the workspace repository as a submodule.</p>
<p>Assuming that you want to start with a clean Symphony installation, you would install Symphony at this point to create and populate the workspace directory. Once that’s done, you can set up the remote repository.</p>
<pre><code>cd workspace
git init
git add .
git commit -m "Initialize workspace repository"
git remote add origin git@github.com:username/site-workspace.git
git push origin master
</code></pre>
<p>Then, remove the existing workspace and add the workspace as a submodule.</p>
<pre><code>cd ..
rm -rf workspace
git submodule add git@github.com:username/site-workspace.git workspace
</code></pre>
<h5>Heavyweight champion: contributing to Symphony</h5>
<p>Now that you’re a bonafide Git genius, the last step in your path to world domination is to improve Symphony itself. We’ll assume you’ve already forked Symphony on Github, because you’re awesome.</p>
<p>Clone your fork and checkout the integration branch:</p>
<pre><code>git clone git@github.com:username/symphony-2.git 
git checkout -b integration
git pull origin integration
</code></pre>
<p>Now make a new branch for your changes:</p>
<pre><code>git checkout -b mybranch
git merge integration
git push origin mybranch
</code></pre>
<p>When you’re ready to submit your changes to the Symphony team, issue a pull request on Github. See <a href="http://help.github.com/pull-requests/">Github’s instructions</a> for help.</p></body>
            <concepts>
                <item id="33158" handle="git" section-handle="concepts" section-name="Concepts">Git</item>
                <item id="33159" handle="github" section-handle="concepts" section-name="Concepts">Github</item>
            </concepts>
            <date-modified time="09:23" weekday="7">2010-10-31</date-modified>
            <date-published time="09:23" weekday="7">2010-10-31</date-published>
            <title handle="getting-git-for-symphony-development">Getting Git for Symphony Development</title>
        </entry>
    </learn-article-view>
</data>